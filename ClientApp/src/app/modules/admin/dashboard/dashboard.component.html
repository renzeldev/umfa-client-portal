<div class="flex flex-col flex-auto min-w-0">
    <div class="bg-card">
        <div class="flex flex-col w-full mx-auto px-6 sm:px-8">
            <div class="flex flex-col sm:flex-row flex-auto sm:items-center min-w-0 my-2 sm:my-3">
                <div class="flex flex-auto items-center min-w-0">
                    <div class="flex flex-col min-w-0 ml-4">
                        <div class="text-2xl md:text-4xl font-semibold tracking-tight leading-7 md:leading-snug truncate">{{headerText}}</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="flex-auto border-t -mt-px pt-2 sm:pt-3">
        <div class="w-full mx-auto">
            <mat-tab-group
                class="sm:px-2"
                [animationDuration]="'0'"
                [selectedIndex]="selectedTab">
                <mat-tab label="Home">
                    <ng-template matTabContent>
                        <div *ngIf="stats$ | async as stats; else loading">
                            <ng-container *ngIf="!isTenant; else tenantTemplate">
                                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-9 xl:grid-cols-9 gap-10 w-full">
                                    <div class="bg-gradient-to-r from-blue-500 to-blue-800 col-span-1 lg:col-span-2 flex flex-col flex-auto p-6 rounded-2xl overflow-hidden card cursor-pointer card-zoom-in" (click)="onDetail(tabType.Buildings)">
                                        <div class="flex items-start justify-between text-white h-full">
                                            <div class="flex flex-col w-full gap-y-1 justify-between h-full">
                                                <div class="flex w-full justify-between">
                                                    <div class="flex flex-col">
                                                        <div class="text-2xl font-medium tracking-normal leading-8 truncate">Buildings</div>
                                                        <div class="text-3xl font-semibold tracking-normal ">
                                                            {{stats.BuildingStats.NumberOfBuildings}}
                                                        </div>
                                                    </div>
                                                    <mat-icon class="icon-size-10" [svgIcon]="'feather:buildings'"></mat-icon>
                                                </div>
                                                <div class="flex flex-col w-full gap-y-1">
                                                    <div class="flex w-full justify-between leading-4">
                                                        <span class="text-md">GLA</span>
                                                        <span class="text-lg font-semibold">{{stats.BuildingStats.TotalGLA | number : '1.0-2'}}</span>
                                                    </div>
                                                    <div class="flex w-full justify-between leading-4">
                                                        <span class="text-md">Meter Registers</span>
                                                        <span class="text-lg font-semibold">{{stats.BuildingStats.TotalNumberOfMeters | number : '1.0-2'}}</span>
                                                    </div>
                                                </div>
                                            </div>                                        
                                        </div>
                                    </div>
                                    <div class="bg-gradient-to-r from-amber-400 to-amber-500 col-span-1 lg:col-span-2 flex flex-col flex-auto p-6 rounded-2xl overflow-hidden card cursor-pointer card-zoom-in" (click)="onDetail(tabType.Shops)">
                                        <div class="flex items-start justify-between text-white h-full">
                                            <div class="flex flex-col w-full gap-y-1 justify-between h-full">
                                                <div class="flex w-full justify-between">
                                                    <div class="flex flex-col">
                                                        <div class="text-2xl font-medium tracking-normal leading-8 truncate">Shops</div>
                                                        <div class="text-3xl font-semibold tracking-normal ">
                                                            {{stats.ShopStats.NumberOfShops | number : '1.0-2'}}
                                                        </div>
                                                    </div>
                                                    <mat-icon class="icon-size-10" [svgIcon]="'feather:clients'"></mat-icon>
                                                </div>
                                                <div class="flex flex-col w-full gap-y-1">
                                                    <div class="flex w-full justify-between leading-4">
                                                        <span class="text-md">Occupied</span>
                                                        <span class="text-lg font-semibold">{{stats.ShopStats.OccupiedPercentage | percent : '1.0-2'}}</span>
                                                    </div>
                                                    <div class="flex w-full justify-between leading-4">
                                                        <span class="text-md">Area</span>
                                                        <span class="text-lg font-semibold">{{stats.ShopStats.TotalArea | number : '1.0-2'}}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="bg-gradient-to-r from-emerald-400 to-emerald-500 col-span-1 lg:col-span-2 flex flex-col flex-auto p-6 rounded-2xl overflow-hidden card cursor-pointer card-zoom-in" (click)="onDetail(tabType.Tenants)">
                                        <div class="flex items-start justify-between text-white h-full">
                                            <div class="flex flex-col w-full gap-y-1 justify-between h-full">
                                                <div class="flex w-full justify-between">
                                                    <div class="flex flex-col">
                                                        <div class="text-2xl font-medium tracking-normal leading-8 truncate">Tenants</div>
                                                        <div class="text-3xl font-semibold tracking-normal ">
                                                            {{stats.TenantStats.NumberOfTenants | number : '1.0-2'}}
                                                        </div>
                                                    </div>
                                                    <mat-icon class="icon-size-10 text-white" [svgIcon]="'feather:users'"></mat-icon>
                                                </div>
                                                <div class="flex flex-col w-full gap-y-1">
                                                    <div class="flex w-full justify-between leading-4">
                                                        <span class="text-md">Occupied</span>
                                                        <span class="text-lg font-semibold">{{stats.TenantStats.OccupiedPercentage | percent : '1.0-2'}}</span>
                                                    </div>
                                                    <div class="flex w-full justify-between leading-4">
                                                        <span class="text-md">Recovered</span>
                                                        <span class="text-lg font-semibold">{{stats.TenantStats.RecoverablePercentage | percent : '1.0-2'}}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="bg-gradient-to-r from-violet-400 to-violet-600 sm:col-span-3 flex flex-col flex-auto p-6 rounded-2xl overflow-hidden card cursor-pointer card-zoom-in" (click)="onDetail(tabType.SmartServices)">
                                        <div class="flex items-start justify-between text-white h-full">
                                            <div class="flex flex-col w-full gap-y-1 justify-between h-full">
                                                <div class="flex w-full justify-between">
                                                    <div class="flex flex-col">
                                                        <div class="text-2xl font-medium tracking-normal leading-8 truncate">Smart Services</div>
                                                        <div class="text-3xl font-semibold tracking-normal ">
                                                            {{stats.SmartStats.TotalSmart | number : '1.0-2'}}
                                                        </div>
                                                    </div>
                                                    <mat-icon class="icon-size-10 text-white"><img class="w-full" src="/assets/images/icons/smart_services.svg"/></mat-icon>
                                                </div>
                                                <div class="flex flex-col w-full gap-y-1">
                                                    <div class="flex w-full gap-x-4">
                                                        <div class="flex justify-between w-1/2 leading-4">
                                                            <span class="text-md">Solar</span>
                                                            <span class="text-lg font-semibold">{{stats.SmartStats.SolarCount}}</span>
                                                        </div>
                                                        <div class="flex justify-between w-1/2 leading-4">
                                                            <span class="text-md">Generator</span>
                                                            <span class="text-lg font-semibold">{{stats.SmartStats.GeneratorCount}}</span>
                                                        </div>
                                                    </div>
                                                    <div class="flex w-full gap-x-4">
                                                        <div class="flex justify-between w-1/2 leading-4">
                                                            <span class="text-md">Electricity</span>
                                                            <span class="text-lg font-semibold">{{stats.SmartStats.ConsumerElectricityCount}}</span>
                                                        </div>
                                                        <div class="flex justify-between w-1/2 leading-4">
                                                            <span class="text-md">Water</span>
                                                            <span class="text-lg font-semibold">{{stats.SmartStats.ConsumerWaterCount}}</span>
                                                        </div>
                                                    </div>
                                                    <div class="flex w-full gap-x-4">
                                                        <div class="flex justify-between w-1/2 leading-4">
                                                            <span class="text-md">Bulk</span>
                                                            <span class="text-lg font-semibold">{{stats.SmartStats.BulkCount}}</span>
                                                        </div>
                                                        <div class="flex justify-between w-1/2 leading-4">
                                                            <span class="text-md">Council Check</span>
                                                            <span class="text-lg font-semibold">{{stats.SmartStats.CouncilChkCount}}</span>
                                                        </div>
                                                    </div>
                                                    <div class="flex mt-2">
                                                        <a href="javascript:void(0);" (click)="$event.stopPropagation(); onDetailAlarms()" class="text-md leading-4 cursor-pointer underline text-hover">Alarms: {{stats.SmartStats.AlarmsConfigured}} Configured, {{stats.SmartStats.AlarmsTriggered}} Triggered</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="grid grid-cols-1 lg:grid-cols-3 mt-3 gap-x-8 gap-y-2">
                                    <div class="col-span-1">
                                        <div class="sm:col-span-2 flex flex-col flex-auto  bg-card shadow rounded-2xl overflow-visible">
                                            <div class="flex flex-col px-6 pt-6 gap-y-2">
                                                <div class="flex items-start justify-between">
                                                    <div class="text-lg font-semibold tracking-tight leading-6 truncate">Electricity Usage - Last 6 Periods</div>
                                                </div>
                                                <div class="flex flex-col">
                                                    <div class="text-3xl font-semibold tracking-tight leading-tight">
                                                        {{totalElectricityUsage | number : '1.0-2'}} <span class="text-xl">kwh</span>
                                                    </div>
                                                    <div class="flex items-center">
                                                        <mat-icon
                                                            class="mr-1 icon-size-5"
                                                            [ngClass]="{'text-green-500': varianceElectricity > 100, 'text-red-500': varianceElectricity < 100}"
                                                            [svgIcon]="varianceElectricity > 100 ? 'heroicons_solid:trending-up' : 'heroicons_solid:trending-down'"></mat-icon>
                                                        <div class="font-medium text-sm text-secondary leading-none whitespace-nowrap">
                                                            Variance for last period: <span class="text-pink-500">{{varianceElectricity | number : '1.0-2'}} %</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                                
                                            <div class="flex flex-col flex-auto w-full">
                                                <apx-chart
                                                    class="flex-auto w-full h-24"
                                                    [chart]="chartElectricityUsage.chart"
                                                    [colors]="chartElectricityUsage.colors"
                                                    [series]="chartElectricityUsage.series"
                                                    [stroke]="chartElectricityUsage.stroke"
                                                    [tooltip]="chartElectricityUsage.tooltip"
                                                    [xaxis]="chartElectricityUsage.xaxis"
                                                    [yaxis]="chartElectricityUsage.yaxis"></apx-chart>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-span-1">
                                        <div class="sm:col-span-2 flex flex-col flex-auto  bg-card shadow rounded-2xl overflow-visible">
                                            <div class="flex flex-col px-6 pt-6 gap-y-2">
                                                <div class="flex items-start justify-between">
                                                    <div class="text-lg font-semibold tracking-tight leading-6 truncate">Water Usage - Last 6 Periods</div>
                                                </div>
                                                <div class="flex flex-col">
                                                    <div class="text-3xl font-semibold tracking-tight leading-tight">
                                                        {{totalWaterUsage | number : '1.0-2'}} <span class="text-xl">KL</span>
                                                    </div>
                                                    <div class="flex items-center">
                                                        <mat-icon
                                                            class="mr-1 icon-size-5"
                                                            [ngClass]="{'text-green-500': varianceWater > 100, 'text-red-500': varianceWater < 100}"
                                                            [svgIcon]="varianceWater > 100 ? 'heroicons_solid:trending-up' : 'heroicons_solid:trending-down'"></mat-icon>
                                                        <div class="font-medium text-sm text-secondary leading-none whitespace-nowrap">
                                                            Variance for last period: <span class="text-blue-500">{{varianceWater | number : '1.0-2'}} %</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                                
                                            <div class="flex flex-col flex-auto w-full">
                                                <apx-chart
                                                    class="flex-auto w-full h-24"
                                                    [chart]="chartWaterUsage.chart"
                                                    [colors]="chartWaterUsage.colors"
                                                    [series]="chartWaterUsage.series"
                                                    [stroke]="chartWaterUsage.stroke"
                                                    [tooltip]="chartWaterUsage.tooltip"
                                                    [xaxis]="chartWaterUsage.xaxis"
                                                    [yaxis]="chartWaterUsage.yaxis"></apx-chart>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-span-1">
                                        <div class="sm:col-span-2 flex flex-col flex-auto  bg-card shadow rounded-2xl overflow-visible">
                                            <div class="flex flex-col px-6 pt-6 gap-y-2">
                                                <div class="flex items-start justify-between">
                                                    <div class="text-lg font-semibold tracking-tight leading-6 truncate">Sales - Last 6 Periods</div>
                                                </div>
                                                <div class="flex flex-col">
                                                    <div class="text-3xl font-semibold tracking-tight leading-tight">
                                                        R {{totalSales | number : '1.0-2'}}
                                                    </div>
                                                    <div class="flex items-center">
                                                        <mat-icon
                                                            class="mr-1 icon-size-5"
                                                            [ngClass]="{'text-green-500': varianceSales > 100, 'text-red-500': varianceSales < 100}"
                                                            [svgIcon]="varianceSales > 100 ? 'heroicons_solid:trending-up' : 'heroicons_solid:trending-down'"></mat-icon>
                                                        <div class="font-medium text-sm text-secondary leading-none whitespace-nowrap">
                                                            Variance for last period: <span class="text-emerald-500">{{varianceSales | number : '1.0-2'}} %</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                                
                                            <div class="flex flex-col flex-auto w-full">
                                                <apx-chart
                                                    class="flex-auto w-full h-24"
                                                    [chart]="chartSales.chart"
                                                    [colors]="chartSales.colors"
                                                    [series]="chartSales.series"
                                                    [stroke]="chartSales.stroke"
                                                    [tooltip]="chartSales.tooltip"
                                                    [xaxis]="chartSales.xaxis"
                                                    [yaxis]="chartSales.yaxis"></apx-chart>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="grid grid-cols-1 lg:grid-cols-3 xl:grid-cols-6 mt-3">
                                    <div class="col-span-1 lg:col-span-2 xl:col-span-3">
                                        <div class="bg-gradient-to-l from-gray-600 to-gray-400 sm:col-span-2 flex flex-col flex-auto shadow rounded-2xl overflow-visible text-white">
                                            <div class="flex flex-col p-2 md:p-6 gap-y-2">
                                                <div class="flex items-start justify-between">
                                                    <div class="text-xl font-medium tracking-tight leading-6">CO<span class="leading-3 text-sm">2</span> Emissions and requirements for off-set based on above statistics</div>
                                                </div>
                                                <div class="flex justify-between gap-x-2">
                                                    <div class="flex flex-col w-full">
                                                        <div class="grid grid-cols-3 gap-y-1 gap-x-2 text-lg" *ngIf="isMobileScreen">
                                                            <div class="col-span-1"></div>
                                                            <div class="col-span-1 flex gap-x-1 md:gap-x-2">
                                                                <div class="service-icon"><img src="/assets/images/icons/electricity.svg"/></div> Electricity
                                                            </div>
                                                            <div class="col-span-1 flex gap-x-1 md:gap-x-2 ">
                                                                <div class="service-icon"><img src="/assets/images/icons/water.svg"/></div>Water
                                                            </div>
                                                            
                                                            <div class="col-span-1">
                                                                CO<span class="leading-3 text-sm">2</span> Tonnes
                                                            </div>
                                                            <div class="col-span-1 text-lg md:text-xl">{{totalElectricityUsage * 0.97 / 1000 | number : '1.0-0'}}</div>
                                                            <div class="col-span-1 text-lg md:text-xl">{{totalWaterUsage * 0.298 / 1000 | number : '1.0-0'}}</div>
    
                                                            <div class="col-span-1">
                                                                Trees
                                                            </div>
                                                            <div class="col-span-1 text-lg md:text-xl">{{totalElectricityUsage * 0.97 / 1000 * 1000 / 27 | number : '1.0-0'}}</div>
                                                            <div class="col-span-1 text-lg md:text-xl">{{totalWaterUsage * 0.298 / 1000 * 1000 / 27 | number : '1.0-0'}}</div>
    
                                                            <div class="col-span-1">
                                                                Area-Hectare
                                                            </div>
                                                            <div class="col-span-1 text-lg md:text-xl">{{totalElectricityUsage * 0.97 / 1000 * 1000 / 27 / 400 | number : '1.0-0'}}</div>
                                                            <div class="col-span-1 text-lg md:text-xl">{{totalWaterUsage * 0.298 / 1000 * 1000 / 27 / 400 | number : '1.0-0'}}</div>
    
                                                            <div class="col-span-1">
                                                                Rugby Fields
                                                            </div>
                                                            <div class="col-span-1 text-lg md:text-xl">{{totalElectricityUsage * 0.97 / 1000 * 1000 / 27 / 400 * 1000 / 12000 | number : '1.0-0'}}</div>
                                                            <div class="col-span-1 text-lg md:text-xl">{{totalWaterUsage * 0.298 / 1000 * 1000 / 27 / 400 * 1000 / 12000 | number : '1.0-0'}}</div>
                                                        </div>
                                                         <div class="grid grid-cols-11 gap-2 text-lg" *ngIf="!isMobileScreen">
                                                            <div class="col-span-3"></div>
                                                            <div class="col-span-2">CO<span class="leading-3 text-sm">2</span> Tonnes</div>
                                                            <div class="col-span-2">Trees</div>
                                                            <div class="col-span-2">Area-Hectare</div>
                                                            <div class="col-span-2">Rugby Fields</div>
    
                                                            <div class="col-span-3 flex gap-x-2">
                                                                <div class="service-icon"><img src="/assets/images/icons/electricity.svg"/></div> Electricity
                                                            </div>                                            
                                                            <div class="col-span-2 text-xl">{{totalElectricityUsage * 0.97 / 1000 | number : '1.0-0'}}</div>
                                                            <div class="col-span-2 text-xl">{{totalElectricityUsage * 0.97 / 1000 * 1000 / 27 | number : '1.0-0'}}</div>
                                                            <div class="col-span-2 text-xl">{{totalElectricityUsage * 0.97 / 1000 * 1000 / 27 / 400 | number : '1.0-0'}}</div>
                                                            <div class="col-span-2 text-xl">{{totalElectricityUsage * 0.97 / 1000 * 1000 / 27 / 400 * 1000 / 12000 | number : '1.0-0'}}</div>
    
                                                            <div class="col-span-3 flex gap-x-2"><div class="service-icon"><img src="/assets/images/icons/water.svg"/></div>Water</div>
                                                            <div class="col-span-2 text-xl">{{totalWaterUsage * 0.298 / 1000 | number : '1.0-0'}}</div>
                                                            <div class="col-span-2 text-xl">{{totalWaterUsage * 0.298 / 1000 * 1000 / 27 | number : '1.0-0'}}</div>
                                                            <div class="col-span-2 text-xl">{{totalWaterUsage * 0.298 / 1000 * 1000 / 27 / 400 | number : '1.0-0'}}</div>
                                                            <div class="col-span-2 text-xl">{{totalWaterUsage * 0.298 / 1000 * 1000 / 27 / 400 * 1000 / 12000 | number : '1.0-0'}}</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ng-container>
                            <ng-template #tenantTemplate>
                                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-7 xl:grid-cols-7 gap-10 w-full">
                                    <div class="bg-gradient-to-r from-amber-400 to-amber-500 col-span-1 lg:col-span-2 flex flex-col flex-auto p-6 shadow rounded-2xl overflow-hidden card cursor-pointer hover:bg-gray-100" (click)="onDetail(tabType.Shops)">
                                        <div class="flex items-start justify-between text-white h-full">
                                            <div class="flex flex-col w-full gap-y-1 justify-between h-full">
                                                <div class="flex w-full justify-between">
                                                    <div class="flex flex-col">
                                                        <div class="text-2xl font-medium tracking-normal leading-8 truncate">Shops</div>
                                                        <div class="text-3xl font-semibold tracking-normal ">
                                                            {{stats.Shops.NumberOfShops | number : '1.0-2'}}
                                                        </div>
                                                    </div>
                                                    <mat-icon class="icon-size-10" [svgIcon]="'feather:clients'"></mat-icon>
                                                </div>
                                                <div class="flex flex-col w-full gap-y-1">
                                                    <div class="flex w-full justify-between leading-4">
                                                        <span class="text-md">Occupied</span>
                                                        <span class="text-lg font-semibold">{{stats.Shops.OccupiedPercentage | percent : '1.0-2'}}</span>
                                                    </div>
                                                    <div class="flex w-full justify-between leading-4">
                                                        <span class="text-md">Area</span>
                                                        <span class="text-lg font-semibold">{{stats.Shops.TotalArea | number : '1.0-2'}}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="bg-gradient-to-r from-emerald-400 to-emerald-500 col-span-1 lg:col-span-2 flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden card cursor-pointer hover:bg-gray-100" (click)="onDetail(tabType.Tenants)">
                                        <div class="flex items-start justify-between text-white h-full">
                                            <div class="flex flex-col w-full gap-y-1 justify-between h-full">
                                                <div class="flex w-full justify-between">
                                                    <div class="flex flex-col">
                                                        <div class="text-2xl font-medium tracking-normal leading-8 truncate">Tenants</div>
                                                        <div class="text-3xl font-semibold tracking-normal ">
                                                            {{stats.Tenants.NumberOfTenants | number : '1.0-2'}}
                                                        </div>
                                                    </div>
                                                    <mat-icon class="icon-size-10 text-white" [svgIcon]="'feather:users'"></mat-icon>
                                                </div>
                                                <div class="flex flex-col w-full gap-y-1">
                                                    <div class="flex w-full justify-between leading-4">
                                                        <span class="text-md">Occupied</span>
                                                        <span class="text-lg font-semibold">{{stats.Tenants.OccupiedPercentage | percent : '1.0-2'}}</span>
                                                    </div>
                                                    <div class="flex w-full justify-between leading-4">
                                                        <span class="text-md">Recovered</span>
                                                        <span class="text-lg font-semibold">{{stats.Tenants.RecoverablePercentage | percent : '1.0-2'}}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="bg-gradient-to-r from-violet-400 to-violet-600 sm:col-span-3 flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden card cursor-pointer hover:bg-gray-100">
                                        <div class="flex items-start justify-between text-white h-full">
                                            <div class="flex flex-col w-full gap-y-1 justify-between h-full">
                                                <div class="flex w-full justify-between">
                                                    <div class="flex flex-col">
                                                        <div class="text-2xl font-medium tracking-normal leading-8 truncate">Smart Services</div>
                                                        <div class="text-3xl font-semibold tracking-normal ">
                                                            {{stats.SmartServices.TotalSmart | number : '1.0-2'}}
                                                        </div>
                                                    </div>
                                                    <mat-icon class="icon-size-10 text-white" [svgIcon]="'feather:users'"></mat-icon>
                                                </div>
                                                <div class="flex flex-col w-full gap-y-1">
                                                    <div class="flex w-full gap-x-4">
                                                        <div class="flex justify-between w-1/2 leading-4">
                                                            <span class="text-md">Electricity</span>
                                                            <span class="text-lg font-semibold">{{stats.SmartServices.Electricity}}</span>
                                                        </div>
                                                        <div class="flex justify-between w-1/2 leading-4">
                                                            <span class="text-md">Water</span>
                                                            <span class="text-lg font-semibold">{{stats.SmartServices.Water}}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="grid grid-cols-1 lg:grid-cols-3 mt-3 gap-x-8 gap-y-2">
                                    <div class="col-span-1">
                                        <div class="sm:col-span-2 flex flex-col flex-auto  bg-card shadow rounded-2xl overflow-visible">
                                            <div class="flex flex-col px-6 pt-6 gap-y-2">
                                                <div class="flex items-start justify-between">
                                                    <div class="text-lg font-semibold tracking-tight leading-6 truncate">Electricity Usage - Last 6 Periods</div>
                                                </div>
                                                <div class="flex flex-col">
                                                    <div class="text-3xl font-semibold tracking-tight leading-tight">
                                                        {{totalElectricityUsage | number : '1.0-2'}} <span class="text-xl">kwh</span>
                                                    </div>
                                                    <div class="flex items-center">
                                                        <mat-icon
                                                            class="mr-1 icon-size-5"
                                                            [ngClass]="{'text-green-500': varianceElectricity > 100, 'text-red-500': varianceElectricity < 100}"
                                                            [svgIcon]="varianceElectricity > 100 ? 'heroicons_solid:trending-up' : 'heroicons_solid:trending-down'"></mat-icon>
                                                        <div class="font-medium text-sm text-secondary leading-none whitespace-nowrap">
                                                            Variance for last period: <span class="text-pink-500">{{varianceElectricity | number : '1.0-2'}} %</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                                
                                            <div class="flex flex-col flex-auto w-full">
                                                <apx-chart
                                                    class="flex-auto w-full h-24"
                                                    [chart]="chartElectricityUsage.chart"
                                                    [colors]="chartElectricityUsage.colors"
                                                    [series]="chartElectricityUsage.series"
                                                    [stroke]="chartElectricityUsage.stroke"
                                                    [tooltip]="chartElectricityUsage.tooltip"
                                                    [xaxis]="chartElectricityUsage.xaxis"
                                                    [yaxis]="chartElectricityUsage.yaxis"></apx-chart>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-span-1">
                                        <div class="sm:col-span-2 flex flex-col flex-auto  bg-card shadow rounded-2xl overflow-visible">
                                            <div class="flex flex-col px-6 pt-6 gap-y-2">
                                                <div class="flex items-start justify-between">
                                                    <div class="text-lg font-semibold tracking-tight leading-6 truncate">Water Usage - Last 6 Periods</div>
                                                </div>
                                                <div class="flex flex-col">
                                                    <div class="text-3xl font-semibold tracking-tight leading-tight">
                                                        {{totalWaterUsage | number : '1.0-2'}} <span class="text-xl">KL</span>
                                                    </div>
                                                    <div class="flex items-center">
                                                        <mat-icon
                                                            class="mr-1 icon-size-5"
                                                            [ngClass]="{'text-green-500': varianceWater > 100, 'text-red-500': varianceWater < 100}"
                                                            [svgIcon]="varianceWater > 100 ? 'heroicons_solid:trending-up' : 'heroicons_solid:trending-down'"></mat-icon>
                                                        <div class="font-medium text-sm text-secondary leading-none whitespace-nowrap">
                                                            Variance for last period: <span class="text-blue-500">{{varianceWater | number : '1.0-2'}} %</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                                
                                            <div class="flex flex-col flex-auto w-full">
                                                <apx-chart
                                                    class="flex-auto w-full h-24"
                                                    [chart]="chartWaterUsage.chart"
                                                    [colors]="chartWaterUsage.colors"
                                                    [series]="chartWaterUsage.series"
                                                    [stroke]="chartWaterUsage.stroke"
                                                    [tooltip]="chartWaterUsage.tooltip"
                                                    [xaxis]="chartWaterUsage.xaxis"
                                                    [yaxis]="chartWaterUsage.yaxis"></apx-chart>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-span-1">
                                        <div class="sm:col-span-2 flex flex-col flex-auto  bg-card shadow rounded-2xl overflow-visible">
                                            <div class="flex flex-col px-6 pt-6 gap-y-2">
                                                <div class="flex items-start justify-between">
                                                    <div class="text-lg font-semibold tracking-tight leading-6 truncate">Sales - Last 6 Periods</div>
                                                </div>
                                                <div class="flex flex-col">
                                                    <div class="text-3xl font-semibold tracking-tight leading-tight">
                                                        R {{totalSales | number : '1.0-2'}}
                                                    </div>
                                                    <div class="flex items-center">
                                                        <mat-icon
                                                            class="mr-1 icon-size-5"
                                                            [ngClass]="{'text-green-500': varianceSales > 100, 'text-red-500': varianceSales < 100}"
                                                            [svgIcon]="varianceSales > 100 ? 'heroicons_solid:trending-up' : 'heroicons_solid:trending-down'"></mat-icon>
                                                        <div class="font-medium text-sm text-secondary leading-none whitespace-nowrap">
                                                            Variance for last period: <span class="text-emerald-500">{{varianceSales | number : '1.0-2'}} %</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                                
                                            <div class="flex flex-col flex-auto w-full">
                                                <apx-chart
                                                    class="flex-auto w-full h-24"
                                                    [chart]="chartSales.chart"
                                                    [colors]="chartSales.colors"
                                                    [series]="chartSales.series"
                                                    [stroke]="chartSales.stroke"
                                                    [tooltip]="chartSales.tooltip"
                                                    [xaxis]="chartSales.xaxis"
                                                    [yaxis]="chartSales.yaxis"></apx-chart>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="grid grid-cols-1 lg:grid-cols-3 xl:grid-cols-6 mt-3">
                                    <div class="col-span-1 lg:col-span-2 xl:col-span-3">
                                        <div class="bg-gradient-to-l from-gray-600 to-gray-400 sm:col-span-2 flex flex-col flex-auto shadow rounded-2xl overflow-visible text-white">
                                            <div class="flex flex-col p-2 md:p-6 gap-y-2">
                                                <div class="flex items-start justify-between">
                                                    <div class="text-xl font-medium tracking-tight leading-6">CO<span class="leading-3 text-sm">2</span> Emissions and requirements for off-set based on above statistics</div>
                                                </div>
                                                <div class="flex justify-between gap-x-2">
                                                    <div class="flex flex-col w-full">
                                                        <div class="grid grid-cols-3 gap-y-1 gap-x-2 text-lg" *ngIf="isMobileScreen">
                                                            <div class="col-span-1"></div>
                                                            <div class="col-span-1 flex gap-x-1 md:gap-x-2">
                                                                <div class="service-icon"><img src="/assets/images/icons/electricity.svg"/></div> Electricity
                                                            </div>
                                                            <div class="col-span-1 flex gap-x-1 md:gap-x-2">
                                                                <div class="service-icon"><img src="/assets/images/icons/water.svg"/></div> Water
                                                            </div>
                                                            
                                                            <div class="col-span-1">
                                                                CO<span class="leading-3 text-sm">2</span> Tonnes
                                                            </div>
                                                            <div class="col-span-1 text-lg md:text-xl">{{totalElectricityUsage * 0.97 / 1000 | number : '1.0-0'}}</div>
                                                            <div class="col-span-1 text-lg md:text-xl">{{totalWaterUsage * 0.298 / 1000 | number : '1.0-0'}}</div>
    
                                                            <div class="col-span-1">
                                                                Trees
                                                            </div>
                                                            <div class="col-span-1 text-lg md:text-xl">{{totalElectricityUsage * 0.97 / 1000 * 1000 / 27 | number : '1.0-0'}}</div>
                                                            <div class="col-span-1 text-lg md:text-xl">{{totalWaterUsage * 0.298 / 1000 * 1000 / 27 | number : '1.0-0'}}</div>
    
                                                            <div class="col-span-1">
                                                                Area-Hectare
                                                            </div>
                                                            <div class="col-span-1 text-lg md:text-xl">{{totalElectricityUsage * 0.97 / 1000 * 1000 / 27 / 400 | number : '1.0-0'}}</div>
                                                            <div class="col-span-1 text-lg md:text-xl">{{totalWaterUsage * 0.298 / 1000 * 1000 / 27 / 400 | number : '1.0-0'}}</div>
    
                                                            <div class="col-span-1">
                                                                Rugby Fields
                                                            </div>
                                                            <div class="col-span-1 text-lg md:text-xl">{{totalElectricityUsage * 0.97 / 1000 * 1000 / 27 / 400 * 1000 / 12000 | number : '1.0-0'}}</div>
                                                            <div class="col-span-1 text-lg md:text-xl">{{totalWaterUsage * 0.298 / 1000 * 1000 / 27 / 400 * 1000 / 12000 | number : '1.0-0'}}</div>
                                                        </div>
                                                         <div class="grid grid-cols-11 gap-2 text-lg" *ngIf="!isMobileScreen">
                                                            <div class="col-span-3"></div>
                                                            <div class="col-span-2">CO<span class="leading-3 text-sm">2</span> Tonnes</div>
                                                            <div class="col-span-2">Trees</div>
                                                            <div class="col-span-2">Area-Hectare</div>
                                                            <div class="col-span-2">Rugby Fields</div>
    
                                                            <div class="col-span-3 flex gap-x-2">
                                                                <div class="service-icon"><img src="/assets/images/icons/electricity.svg"/></div> Electricity
                                                            </div>                                            
                                                            <div class="col-span-2 text-xl">{{totalElectricityUsage * 0.97 / 1000 | number : '1.0-0'}}</div>
                                                            <div class="col-span-2 text-xl">{{totalElectricityUsage * 0.97 / 1000 * 1000 / 27 | number : '1.0-0'}}</div>
                                                            <div class="col-span-2 text-xl">{{totalElectricityUsage * 0.97 / 1000 * 1000 / 27 / 400 | number : '1.0-0'}}</div>
                                                            <div class="col-span-2 text-xl">{{totalElectricityUsage * 0.97 / 1000 * 1000 / 27 / 400 * 1000 / 12000 | number : '1.0-0'}}</div>
    
                                                            <div class="col-span-3 flex gap-x-2">
                                                                <div class="service-icon"><img src="/assets/images/icons/water.svg"/></div> Water</div>
                                                            <div class="col-span-2 text-xl">{{totalWaterUsage * 0.298 / 1000 | number : '1.0-0'}}</div>
                                                            <div class="col-span-2 text-xl">{{totalWaterUsage * 0.298 / 1000 * 1000 / 27 | number : '1.0-0'}}</div>
                                                            <div class="col-span-2 text-xl">{{totalWaterUsage * 0.298 / 1000 * 1000 / 27 / 400 | number : '1.0-0'}}</div>
                                                            <div class="col-span-2 text-xl">{{totalWaterUsage * 0.298 / 1000 * 1000 / 27 / 400 * 1000 / 12000 | number : '1.0-0'}}</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ng-template>
                        </div>
                        <ng-template #loading></ng-template>
                    </ng-template>
                </mat-tab>
                <ng-container *ngFor="let tabItem of tabsList; let i = index;">
                    <ng-container [ngSwitch]="tabItem.type">
                        <ng-container *ngSwitchCase="'AlarmTrigger'">
                            <mat-tab label="Alarm Triggered">
                                <ng-template mat-tab-label>
                                    Alarm Triggered
                                    <mat-icon class="icon-size-4 hover:text-red-500 ml-2" [svgIcon]="'feather:x'" (click)="removeTab(i)"></mat-icon>
                                  </ng-template>
                                <ng-template matTabContent>
                                    <div class="flex flex-col bg-white p-4 rounded-md">
                                        <div class="flex flex-col" *ngIf="alarmTrigerInfo">
                                            <div class="text-2xl font-semibold pb-2">
                                                <span class="text-red-500">{{alarmTrigerInfo.AlarmName}}</span> Alarm Analysis for AMR Meter {{alarmTrigerInfo.MeterSerial}}
                                            </div>
                                            <div class="flex text-xl gap-x-3">
                                                <span class="font-bold min-w-20">Partner:</span>
                                                <span>{{alarmTrigerInfo.Partner}}</span>
                                            </div>
                                            <div class="flex text-xl gap-x-3">
                                                <span class="font-bold min-w-20">Building:</span>
                                                <span>{{alarmTrigerInfo.Building}}</span>
                                            </div>
                                            <div class="flex text-xl gap-x-3">
                                                <span class="font-bold min-w-20">UMFA Meter No:</span>
                                                <span>{{alarmTrigerInfo.UMFAMeterNo}}</span>
                                            </div>
                                            <div class="flex text-xl gap-x-3">
                                                <span class="font-bold min-w-20">Description:</span>
                                                <span>{{alarmTrigerInfo.MeterDescription}}</span>
                                            </div>
                                        </div>
                                        <div class="flex w-full" *ngIf="alarmTriggeredDataSource" style="height: 350px; overflow: visible !important; background-color: #f8f9fa;">
                                            <dx-chart [dataSource]="alarmTriggeredDataSource" [customizePoint]="customizePoint" (onPointClick)="pointClick($event)" class="w-full">
                                                <!-- <dxo-title [text]="chartTitleWater" [subtitle]="chartSubTitleWater"></dxo-title> -->
                                                <dxo-size [height]="350"></dxo-size>
                                                <dxi-series argumentField="ReadingDateString" valueField="ActFlow" type="bar" color="blue" name="Usage(kL)">
                                                  <dxo-hover-style color="#0af5ed"></dxo-hover-style>
                                                </dxi-series>
                                                <dxo-argument-axis argumentType="string">
                                                  <dxo-label displayMode="rotate" [rotationAngle]="-30"></dxo-label>
                                                </dxo-argument-axis>
                                                <dxo-tooltip [enabled]="false" [zIndex]="5000"
                                                             [customizeTooltip]="customizeTooltip">
                                                </dxo-tooltip>
                                                <dxo-export [enabled]="true"></dxo-export>
                                                <dxo-scroll-bar [visible]="true"></dxo-scroll-bar>
                                                <dxo-zoom-and-pan argumentAxis="both"></dxo-zoom-and-pan>
                                                <dxo-loading-indicator [enabled]="true"></dxo-loading-indicator>
                                                <dxo-legend verticalAlignment="bottom" horizontalAlignment="center" zIndex="6000">
                                                </dxo-legend>
                                            </dx-chart>
                                        </div>
                                        <div class="flex flex-col gap-y-1" *ngIf="alarmTrigerInfo">
                                            <div class="text-xl">Alarm configuration at time of Alarm - <span class="font-bold">{{alarmTrigerInfo.AlarmName}}</span>(Un-Expected flow observed during in-active hours)</div>
                                            <div class="flex gap-x-6 alarmTrigger-detail items-center pt-2" [formGroup]="form">
                                                <div class="flex items-center gap-x-2">
                                                    <div class="text-lg font-semibold">Alarm Threshold Value:</div>
                                                    <div class="flex items-center gap-x-1">
                                                        <mat-form-field class="fuse-mat-dense w-full" [floatLabel]="'always'">
                                                            <input matInput type="text" [formControlName]="'Threshold'"/> 
                                                        </mat-form-field>
                                                        <span class="text-lg font-semibold">KL</span>
                                                    </div>
                                                </div>
                                                <div class="flex gap-x-2 items-center">
                                                    <div class="text-lg font-semibold">For Duration:</div>
                                                    <dx-select-box [items]="minutues" displayExpr="Value" valueExpr="Value" class="form-control" label="Duration"
                                                        required placeholder="In Minutes" lableMode="static" name="meter" [searchEnabled]="true" [formControlName]="'Duration'">
                                                    </dx-select-box>
                                                    <div class="text-lg font-semibold">Consecutive Profiles</div>
                                                </div>
                                            </div>
                                            <div class="flex flex-col py-4 gap-y-2 bg-gray-200 px-4 width-fit min-w-200 mt-2">
                                                <div class="flex">
                                                    <div class="text-lg font-semibold min-w-80">Average usage observed:</div>
                                                    <div class="flex items-center gap-x-1">
                                                        <mat-form-field class="fuse-mat-dense w-full" [floatLabel]="'always'">
                                                            <input matInput type="text" [readonly]="true" value="{{alarmTrigerInfo.AverageObserved}}"/> 
                                                        </mat-form-field>
                                                        <span class="text-lg font-semibold">KL</span>
                                                    </div>
                                                </div>
                                                <div class="flex">
                                                    <div class="text-lg font-semibold min-w-80">Peak usage observed:</div>
                                                    <div class="flex items-center gap-x-1">
                                                        <mat-form-field class="fuse-mat-dense w-full" [floatLabel]="'always'">
                                                            <input matInput type="text" [readonly]="true" value="{{alarmTrigerInfo.MaximumObserved}}"/> 
                                                        </mat-form-field>
                                                        <span class="text-lg font-semibold">KL</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="flex pt-3 border-t border-gray-300 mt-2 justify-end gap-x-2">
                                                <button class="dnm-btn dnm-btn-cancel" type="button" (click)="onCancelAcknoledge()">Cancel</button>
                                                <button mat-raised-button color="primary" class="dnm-btn dnm-btn-primary" type="button" (click)="onAcknowledge()">Acknowledge</button>
                                            </div>
                                        </div>
                                    </div>
                                </ng-template>
                            </mat-tab>
                        </ng-container>
                        <ng-container *ngSwitchCase="'TenantSlipDetail'">
                            <mat-tab class="home-tab" label="{{tabItem.title}}">
                                <ng-template mat-tab-label>
                                    {{tabItem.title}}
                                    <mat-icon class="icon-size-4 hover:text-red-500 ml-2" [svgIcon]="'feather:x'" (click)="removeTab(i)"></mat-icon>
                                </ng-template>
                                <ng-template matTabContent>
                                    <app-tenant-slip-detail></app-tenant-slip-detail>
                                </ng-template>
                            </mat-tab>
                        </ng-container>
                        <ng-container *ngSwitchCase="'TenantSlipDashboard'">
                            <mat-tab class="home-tab" label="{{tabItem.title}}">
                                <ng-template mat-tab-label>
                                    {{tabItem.title}}
                                    <mat-icon class="icon-size-4 hover:text-red-500 ml-2" [svgIcon]="'feather:x'" (click)="removeTab(i)"></mat-icon>
                                </ng-template>
                                <ng-template matTabContent>
                                    <app-tenant-slip-dashboard [criteria]="tabItem.dataSource"></app-tenant-slip-dashboard>
                                </ng-template>
                            </mat-tab>
                        </ng-container>
                        <ng-container *ngSwitchCase="'TenantSlipDownloads'">
                            <mat-tab class="home-tab" label="{{tabItem.title}}">
                                <ng-template mat-tab-label>
                                    {{tabItem.title}}
                                    <mat-icon class="icon-size-4 hover:text-red-500 ml-2" [svgIcon]="'feather:x'" (click)="removeTab(i)"></mat-icon>
                                </ng-template>
                                <ng-template matTabContent>
                                    <app-tenant-slip-downloads></app-tenant-slip-downloads>
                                </ng-template>
                            </mat-tab>
                        </ng-container>
                        <ng-container *ngSwitchCase="'BuildingReports'">
                            <mat-tab class="home-tab" label="{{tabItem.title}}">
                                <ng-template mat-tab-label>
                                    {{tabItem.title}}
                                    <mat-icon class="icon-size-4 hover:text-red-500 ml-2" [svgIcon]="'feather:x'" (click)="removeTab(i)"></mat-icon>
                                </ng-template>
                                <ng-template matTabContent>
                                    <app-building-reports [reportType]="tabItem.dataSource.reportType" [buildingId]="tabItem.dataSource.buildingId" [partnerId]="tabItem.dataSource.partnerId"></app-building-reports>
                                    <!-- <app-tenant-slip-downloads></app-tenant-slip-downloads> -->
                                </ng-template>
                            </mat-tab>
                        </ng-container>
                        <ng-container *ngSwitchCase="'ShopList'">
                            <mat-tab class="home-tab" label="{{tabItem.title}}">
                                <ng-template mat-tab-label>
                                    {{tabItem.title}}
                                    <mat-icon class="icon-size-4 hover:text-red-500 ml-2" [svgIcon]="'feather:x'" (click)="removeTab(i)"></mat-icon>
                                </ng-template>
                                <ng-template matTabContent>
                                    <app-shop-list [buildingId]="tabItem.dataSource.buildingId" [partnerId]="tabItem.dataSource.partnerId"></app-shop-list>
                                </ng-template>
                            </mat-tab>
                        </ng-container>
                        <ng-container *ngSwitchCase="'TenantsList'">
                            <mat-tab class="home-tab" label="{{tabItem.title}}">
                                <ng-template mat-tab-label>
                                    {{tabItem.title}}
                                    <mat-icon class="icon-size-4 hover:text-red-500 ml-2" [svgIcon]="'feather:x'" (click)="removeTab(i)"></mat-icon>
                                </ng-template>
                                <ng-template matTabContent>
                                    <app-tenants-list [buildingId]="tabItem.dataSource.buildingId" [partnerId]="tabItem.dataSource.partnerId"></app-tenants-list>
                                </ng-template>
                            </mat-tab>
                        </ng-container>
                        <ng-container *ngSwitchCase="'ShopDetailDashboard'">
                            <mat-tab class="home-tab" label="{{tabItem.title}}">
                                <ng-template mat-tab-label>
                                    {{tabItem.title}}
                                    <mat-icon class="icon-size-4 hover:text-red-500 ml-2" [svgIcon]="'feather:x'" (click)="removeTab(i)"></mat-icon>
                                </ng-template>
                                <ng-template matTabContent>
                                    <app-shop-detail [buildingId]="tabItem.dataSource.buildingId" [shopId]="tabItem.dataSource.shopId"></app-shop-detail>
                                </ng-template>
                            </mat-tab>
                        </ng-container>
                        <ng-container *ngSwitchCase="'TenantDetailDashboard'">
                            <mat-tab class="home-tab" label="{{tabItem.title}}">
                                <ng-template mat-tab-label>
                                    {{tabItem.title}}
                                    <mat-icon class="icon-size-4 hover:text-red-500 ml-2" [svgIcon]="'feather:x'" (click)="removeTab(i)"></mat-icon>
                                </ng-template>
                                <ng-template matTabContent>
                                    <app-tenant-detail [buildingId]="tabItem.dataSource.buildingId" [tenantId]="tabItem.dataSource.tenantId" [tenantName]="tabItem.dataSource.tenantName"></app-tenant-detail>
                                </ng-template>
                            </mat-tab>
                        </ng-container>
                        <ng-container *ngSwitchCase="'TenantBillingDetail'">
                            <mat-tab class="home-tab" label="{{tabItem.title}}">
                                <ng-template mat-tab-label>
                                    {{tabItem.title}}
                                    <mat-icon class="icon-size-4 hover:text-red-500 ml-2" [svgIcon]="'feather:x'" (click)="removeTab(i)"></mat-icon>
                                </ng-template>
                                <ng-template matTabContent>
                                    <app-tenant-billing-detail [buildingId]="tabItem.dataSource.buildingId" [periodId]="tabItem.dataSource.periodId" [tenantId]="tabItem.dataSource.tenantId" [tenantName]="tabItem.dataSource.tenantName"></app-tenant-billing-detail>
                                </ng-template>
                            </mat-tab>
                        </ng-container>
                        <ng-container *ngSwitchCase="'ShopBilling'">
                            <mat-tab class="home-tab" label="{{tabItem.title}}">
                                <ng-template mat-tab-label>
                                    {{tabItem.title}}
                                    <mat-icon class="icon-size-4 hover:text-red-500 ml-2" [svgIcon]="'feather:x'" (click)="removeTab(i)"></mat-icon>
                                </ng-template>
                                <ng-template matTabContent>
                                    <app-shop-billing [shopId]="tabItem.dataSource.shopId"></app-shop-billing>
                                </ng-template>
                            </mat-tab>
                        </ng-container>
                        <ng-container *ngSwitchCase="'TenantBilling'">
                            <mat-tab class="home-tab" label="{{tabItem.title}}">
                                <ng-template mat-tab-label>
                                    {{tabItem.title}}
                                    <mat-icon class="icon-size-4 hover:text-red-500 ml-2" [svgIcon]="'feather:x'" (click)="removeTab(i)"></mat-icon>
                                </ng-template>
                                <ng-template matTabContent>
                                    <app-tenant-billing [tenantId]="tabItem.dataSource.tenantId"></app-tenant-billing>
                                </ng-template>
                            </mat-tab>
                        </ng-container>
                        <ng-container *ngSwitchCase="'ShopDashboardOccupations'">
                            <mat-tab class="home-tab" label="{{tabItem.title}}">
                                <ng-template mat-tab-label>
                                    {{tabItem.title}}
                                    <mat-icon class="icon-size-4 hover:text-red-500 ml-2" [svgIcon]="'feather:x'" (click)="removeTab(i)"></mat-icon>
                                </ng-template>
                                <ng-template matTabContent>
                                    <app-shop-occupations></app-shop-occupations>
                                </ng-template>
                            </mat-tab>
                        </ng-container>
                        <ng-container *ngSwitchCase="'TenantDashboardOccupations'">
                            <mat-tab class="home-tab" label="{{tabItem.title}}">
                                <ng-template mat-tab-label>
                                    {{tabItem.title}}
                                    <mat-icon class="icon-size-4 hover:text-red-500 ml-2" [svgIcon]="'feather:x'" (click)="removeTab(i)"></mat-icon>
                                </ng-template>
                                <ng-template matTabContent>
                                    <app-tenant-occupations [buildingId]="tabItem.dataSource.buildingId" [tenantId]="tabItem.dataSource.tenantId"></app-tenant-occupations>
                                </ng-template>
                            </mat-tab>
                        </ng-container>
                        <ng-container *ngSwitchCase="'ShopDashboarAssignedMeters'">
                            <mat-tab class="home-tab" label="{{tabItem.title}}">
                                <ng-template mat-tab-label>
                                    {{tabItem.title}}
                                    <mat-icon class="icon-size-4 hover:text-red-500 ml-2" [svgIcon]="'feather:x'" (click)="removeTab(i)"></mat-icon>
                                </ng-template>
                                <ng-template matTabContent>
                                    <app-shop-assigned-meters [buildingId]="tabItem.dataSource.buildingId" [shopId]="tabItem.dataSource.shopId"></app-shop-assigned-meters>
                                </ng-template>
                            </mat-tab>
                        </ng-container>
                        <ng-container *ngSwitchCase="'TenantDashboarAssignedMeters'">
                            <mat-tab class="home-tab" label="{{tabItem.title}}">
                                <ng-template mat-tab-label>
                                    {{tabItem.title}}
                                    <mat-icon class="icon-size-4 hover:text-red-500 ml-2" [svgIcon]="'feather:x'" (click)="removeTab(i)"></mat-icon>
                                </ng-template>
                                <ng-template matTabContent>
                                    <app-tenant-assigned-meters [buildingId]="tabItem.dataSource.buildingId" [tenantId]="tabItem.dataSource.tenantId"></app-tenant-assigned-meters>
                                </ng-template>
                            </mat-tab>
                        </ng-container>
                        <ng-container *ngSwitchCase="'ShopDashboardReadings'">
                            <mat-tab class="home-tab" label="{{tabItem.title}}">
                                <ng-template mat-tab-label>
                                    {{tabItem.title}}
                                    <mat-icon class="icon-size-4 hover:text-red-500 ml-2" [svgIcon]="'feather:x'" (click)="removeTab(i)"></mat-icon>
                                </ng-template>
                                <ng-template matTabContent>
                                    <app-shop-readings [buildingId]="tabItem.dataSource.buildingId" [shopId]="tabItem.dataSource.shopId" [meterId]="tabItem.dataSource.meterId"></app-shop-readings>
                                </ng-template>
                            </mat-tab>
                        </ng-container>
                        <ng-container *ngSwitchCase="'TenantDashboardReadings'">
                            <mat-tab class="home-tab" label="{{tabItem.title}}">
                                <ng-template mat-tab-label>
                                    {{tabItem.title}}
                                    <mat-icon class="icon-size-4 hover:text-red-500 ml-2" [svgIcon]="'feather:x'" (click)="removeTab(i)"></mat-icon>
                                </ng-template>
                                <ng-template matTabContent>
                                    <app-tenant-readings [buildingId]="tabItem.dataSource.buildingId" [shopId]="tabItem.dataSource.shopId" [meterId]="tabItem.dataSource.meterId"></app-tenant-readings>
                                </ng-template>
                            </mat-tab>
                        </ng-container>
                        <ng-container *ngSwitchCase="'DashboardTriggeredAlarms'">
                            <mat-tab class="home-tab" label="{{tabItem.title}}">
                                <ng-template mat-tab-label>
                                    {{tabItem.title}}
                                    <mat-icon class="icon-size-4 hover:text-red-500 ml-2" [svgIcon]="'feather:x'" (click)="removeTab(i)"></mat-icon>
                                </ng-template>
                                <ng-template matTabContent>
                                    <app-triggered-alarms [buildingId]="tabItem.dataSource.buildingId" [partnerId]="tabItem.dataSource.partnerId"></app-triggered-alarms>
                                </ng-template>
                            </mat-tab>
                        </ng-container>
                        <ng-container *ngSwitchCase="'DashboardTriggeredAlarmDetail'">
                            <mat-tab class="home-tab" label="{{tabItem.title}}">
                                <ng-template mat-tab-label>
                                    {{tabItem.title}}
                                    <mat-icon class="icon-size-4 hover:text-red-500 ml-2" [svgIcon]="'feather:x'" (click)="removeTab(i)"></mat-icon>
                                </ng-template>
                                <ng-template matTabContent>
                                    <app-meter-alarm-detail [meter]="tabItem.dataSource"></app-meter-alarm-detail>
                                </ng-template>
                            </mat-tab>
                        </ng-container>
                        <ng-container *ngSwitchCase="'DashboardBuildingAlarms'">
                            <mat-tab class="home-tab" label="{{tabItem.title}}">
                                <ng-template mat-tab-label>
                                    {{tabItem.title}}
                                    <mat-icon class="icon-size-4 hover:text-red-500 ml-2" [svgIcon]="'feather:x'" (click)="removeTab(i)"></mat-icon>
                                </ng-template>
                                <ng-template matTabContent>
                                    <app-building-alarms></app-building-alarms>
                                </ng-template>
                            </mat-tab>
                        </ng-container>
                        <ng-container *ngSwitchCase="'SmartBuildingsList'">
                            <mat-tab class="home-tab" label="{{tabItem.title}}">
                                <ng-template mat-tab-label>
                                    {{tabItem.title}}
                                    <mat-icon class="icon-size-4 hover:text-red-500 ml-2" [svgIcon]="'feather:x'" (click)="removeTab(i)"></mat-icon>
                                </ng-template>
                                <ng-template matTabContent>
                                    <app-smart-buildings></app-smart-buildings>
                                    <!-- <app-meter-alarm-detail [meter]="tabItem.dataSource"></app-meter-alarm-detail> -->
                                </ng-template>
                            </mat-tab>
                        </ng-container>
                        <ng-container *ngSwitchCase="'SmartBuildingDashboard'">
                            <mat-tab class="home-tab" label="{{tabItem.title}}">
                                <ng-template mat-tab-label>
                                    {{tabItem.title}}
                                    <mat-icon class="icon-size-4 hover:text-red-500 ml-2" [svgIcon]="'feather:x'" (click)="removeTab(i)"></mat-icon>
                                </ng-template>
                                <ng-template matTabContent>
                                    <app-smart-building-detail [buildingId]="tabItem.dataSource.buildingId"></app-smart-building-detail>
                                    <!-- <app-meter-alarm-detail [meter]="tabItem.dataSource"></app-meter-alarm-detail> -->
                                </ng-template>
                            </mat-tab>
                        </ng-container>
                        <ng-container *ngSwitchDefault>
                            <mat-tab class="home-tab" label="{{tabItem.title}}">
                                <ng-template mat-tab-label>
                                    {{tabItem.title}}
                                    <mat-icon class="icon-size-4 hover:text-red-500 ml-2" [svgIcon]="'feather:x'" (click)="removeTab(i)"></mat-icon>
                                  </ng-template>
                                <ng-template matTabContent>
                                    <ng-container *ngIf="tabItem.type == 'BuildingDetail'; else tabTemplate;">
                                        <app-building-detail [isSmart]="tabItem.detail.IsSmart" [title]="tabItem.title" [stats]="tabItem.dataSource" [buildingId]="tabItem.id" [partnerId]="tabItem.detail.PartnerId"> </app-building-detail>
                                    </ng-container>
                                    <ng-template #tabTemplate>
                                        <ng-container *ngIf="tabItem.dataSource">
                                            <div class="flex gap-x-4">
                                                <div class="bg-card p-2 flex flex-col gap-y-2">
                                                    <span class="text-xl font-semibold pt-2">Non-Smart buildings</span>
                                                    <dx-data-grid
                                                        [dataSource]="tabItem.dataSource[0]"
                                                        [showBorders]="true"
                                                        class="grid-container"
                                                        (onRowPrepared)="onRowPrepared($event)"
                                                        (onRowClick)="onRowClick($event)"
                                                    >
                                                        <dxo-scrolling rowRenderingMode="virtual"> </dxo-scrolling>
                                                        <dxo-paging [pageSize]="10"> </dxo-paging>
                                                        <dxo-filter-row [visible]="'true'" [applyFilter]="currentFilter"></dxo-filter-row>
                                                        <dxo-pager
                                                            [visible]="true"
                                                            [allowedPageSizes]="allowedPageSizes"
                                                            [displayMode]="'compact'"
                                                            [showPageSizeSelector]="true"
                                                            [showInfo]="true"
                                                            [showNavigationButtons]="true"
                                                        >
                                                        </dxo-pager>
                                                        <dxo-search-panel
                                                            [visible]="true"
                                                            [width]="200"
                                                            placeholder="Search..."
                                                        ></dxo-search-panel>
                                                        <dxi-column dataField="PartnerName" caption="Branch" ></dxi-column>
                                                        <dxi-column dataField="BuildingName" caption="Building"></dxi-column>
                                                    </dx-data-grid>
                                                </div>  
                                                <div class="bg-card p-2 flex flex-col gap-y-2">
                                                    <span class="text-xl font-semibold pt-2">Smart buildings</span>
                                                    <dx-data-grid
                                                        [dataSource]="tabItem.dataSource[1]"
                                                        [showBorders]="true"
                                                        class="grid-container"
                                                        (onRowPrepared)="onRowPrepared($event)"
                                                        (onRowClick)="onRowClick($event)"
                                                    >
                                                        <dxo-scrolling rowRenderingMode="virtual"> </dxo-scrolling>
                                                        <dxo-paging [pageSize]="10"> </dxo-paging>
                                                        <dxo-filter-row [visible]="'true'" [applyFilter]="currentFilter"></dxo-filter-row>
                                                        <dxo-pager
                                                            [visible]="true"
                                                            [allowedPageSizes]="allowedPageSizes"
                                                            [displayMode]="'compact'"
                                                            [showPageSizeSelector]="true"
                                                            [showInfo]="true"
                                                            [showNavigationButtons]="true"
                                                        >
                                                        </dxo-pager>
                                                        <dxo-search-panel
                                                            [visible]="true"
                                                            [width]="200"
                                                            placeholder="Search..."
                                                        ></dxo-search-panel>
                                                        <dxi-column dataField="PartnerName" caption="Branch" ></dxi-column>
                                                        <dxi-column dataField="BuildingName" caption="Building"></dxi-column>
                                                    </dx-data-grid>
                                                </div>                                  
                                            </div>
                                        </ng-container>
                                    </ng-template>
                                    
                                </ng-template>
                            </mat-tab>
                        </ng-container>
                    </ng-container>
                    
                </ng-container>
            </mat-tab-group>
        </div>
        

    </div>

</div>
